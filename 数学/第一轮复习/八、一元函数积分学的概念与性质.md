# 一元函数积分学的概念与性质

## 不定积分

### 不定积分与变上限积分的关系

#### 核心概念对比

1. **不定积分 (Indefinite Integral)**
   - 形式：$\int f(x)\,dx = F(x) + C$
   - 本质：表示**所有原函数的集合**
   - 其中 $F(x)$ 是任意一个原函数，$C$ 是任意常数
   - 包含无穷多个函数（通过不同的常数 $C$ 区分）

2. **变上限积分 (Integral with Variable Upper Limit)**
   - 形式：$G(x) = \int_{a}^{x} f(t)\,dt$
   - 本质：表示**其中一个特定的原函数**
   - 根据微积分基本定理：$G'(x) = f(x)$，且 $G(a) = 0$
   - 下限 $a$ 的选择决定了这是哪一个原函数

#### 两者关系的数学表述

若 $F(x)$ 是 $f(x)$ 的任意原函数，则：
$$G(x) = \int_{a}^{x} f(t)\,dt = F(x) - F(a) = F(x) + C$$
其中 $C = -F(a)$

**关键理解**：
- 选定下限 $a$ ⟺ 选定常数 $C$
- 换下限相当于将整条曲线上下平移一个常数
- 变上限积分族与不定积分族是同一个函数族，只是通过不同下限来确定常数项

### 导数的介值性 (Darboux Property)

==若 $f$ 在开区间 $(a,b)$ 可导，则 $f'(x)$ 具有介值性：==
==若 $f'(p) < k < f'(q)$（其中 $p < q$），必存在 $c \in (p,q)$ 使 $f'(c) = k$==

#### 重要区别辨析

**⚠️ 常见误区警示**

1. **介值性 ≠ 连续性**

   - 介值性：导数取遍中间值
   - 连续性：导数函数连续
   - **反例**：$f(x) = \begin{cases} x^2\sin\frac{1}{x}, & x \neq 0 \\ 0, & x = 0 \end{cases}$
   - 此函数处处可导，==但 $f'(x)$ 在 $x = 0$ 处不连续，仍具介值性==

   <img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20250617184208484.png" alt="image-20250617184208484" style="zoom:50%;" />

2. **可导 ≠ 导数连续**

   - 可导：每点处导数存在（点-点性质）
   - 导数连续：导数函数作为整体连续（全局性质）
   - 关系：导数连续 > 可导
   - > - 导数连续 (derivative continuous) 的定义：函数 f′(x)*f*′(*x*) 作为新函数在整个区间上连续。这是"全局-局部"混合的更强条件。
     >
     > 反例说明二者不等价
     >
     > $f(x) = \begin{cases} x^2\sin\frac{1}{x}, & x \neq 0 \\ 0, & x = 0 \end{cases}$
     >
     > 在 `[−1,1]` 内处处可导，但$f'(x)=2xsin\frac{1}{x}−cos\frac{1}{x}$在 00 点没有极限，因此不连续

#### 正确证明思路

使用**均值定理**构造辅助函数：
- 设 $g(x) = f(x) - kx$
- 则 $g'(a) = f'(a) - k < 0$，$g'(b) = f'(b) - k > 0$
- 由极值存在定理，$g$ 在某点 $c \in (a,b)$ 取极值
- 故 $g'(c) = 0$，即 $f'(c) = k$

#### L'Hospital 法则的误用证明陷阱

> #### 错误推理示例及分析
>
> **❌ 错误想法**：用 L'Hospital 证明导数连续从而得出导数介值性。
> 尝试证明：$f'(x_0) = \lim_{x \to x_0} f'(x)$
>
> 错误推理过程：
> $$f'(x_0) = \lim_{x \to x_0} \frac{f(x) - f(x_0)}{x - x_0} \stackrel{\text{L'Hospital}}{=} \lim_{x \to x_0} \frac{f'(x)}{1} = \lim_{x \to x_0} f'(x)$$
>
> #### L'Hospital 法则的正确前提条件
>
> > [!IMPORTANT]
> >
> > 对于 $\frac{0}{0}$ 型极限 $\lim_{x \to x_0} \frac{f(x)}{g(x)}$：
> >
> > 1. $f(x_0) = g(x_0) = 0$
> > 2. $f, g$ 在 $x_0$ 附近可导，且 $g'(x) \neq 0$
> > 3. **关键**：$\lim_{x \to x_0} \frac{f'(x)}{g'(x)}$ **存在**
> >
>
> #### 循环论证的根源
>
> **问题所在**：
> - 要使用 L'Hospital，需要前提条件 (3)：$\lim_{x \to x_0} f'(x)$ 存在，如$x^2\sin\frac{1}{x}$在0处导数存在但导数极限不存在
> - 而这正是我们想要证明的结论
> - 把欲证命题当作使用工具的前提 ⟹ **循环论证**
>
> #### 概念辨析
>
> > [!CAUTION]
> >
> > - **导数存在**：$f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}$ 在每点存在
> > - **导数极限存在**：$\lim_{x \to x_0} f'(x)$ 存在
> > - 关系：导数极限存在 > 导数存在
> >

### 达布定理疑问

对于Darboux 定理，只要求了f（x）在[a,b]可导，那会不会有这种情况，f'[a]=常数1，f'[b]=常数2，（a，b）之间的导数值都大于max（常数1，常数2）或者小于min

- **利用 Darboux 定理反证**，如果内部导数值全高于端点，那么介值性不满足 ⇒ 矛盾；
- **从导数定义入手反证**，端点导数是内部极限，若内部都比两端高，端点导数极限无法趋近预设值 ⇒ 矛盾。

结论：不可出现"内部导数值全部大于/小于两端" 的情形。

![image-20250617170154707](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20250617170154707.png)

同理可排除 "内部导数全小于两端" 的情形。

### 学习要点总结

1. **概念层次要分清**：可导 < 导数连续，介值性 ≠ 连续性

2. **定理应用要谨慎**：使用 L'Hospital 前必须验证所有前提条件

3. **证明思路要正确**：避免循环论证，选择合适的定理工具

4. ==**反例要记住**：$x^2\sin\frac{1}{x}$ 类函数是很多错误想法的反驳利器==

5. > 1. 如果导函数存在，当导函数在一点的极限存在时，导函数在这一点必连续。
   > 2. 如果导函数在一点存在，则这一点一定不会是导函数的第一类间断点。
   > 3. 若 \(f(x)\) 可导，则 \(f'(x)\) 连续，也可能含有震荡断点。

6. 原理总结

### 思考题

连续函数必有原函数怎么证明  P244

为什么第一类间断点和无穷间断点在包含该间断点的区间内必没有原函数F(x)  P245-247

达布定理怎么证明 P246，思想类似于P260方法二⭐

## 定积分

### Q1:振荡间断点与定积分存在性

#### 问题描述
若函数 $f(x)$ 在区间 $[a,b]$ 上有有限个振荡间断点，该函数的定积分是否存在？

#### 理论基础

**定积分存在充分条件**：

1. 若$f(x)$在$[a,b]$连续，则$\int_a^b f(x)\,dx$ 存在
2. 若$f(x)$在$[a,b]$单调，则$\int_a^b f(x)\,dx$ 存在
3. 若$f(x)$在$[a,b]$上有界，且只有有限个间断点，则$\int_a^b f(x)\,dx$ 存在
4. 若$f(x)$在$[a,b]$有有限个第一类间断点，则$\int_a^b f(x)\,dx$ 存在

**定积分存在必要条件**：

可积函数必有界。即若定积分$\int_a^b f(x)\,dx$ 存在，则$f(x)$在$[a,b]$上有界

#### 振荡间断点分类与分析

**1. 有界振荡间断点**

定义：设 $x_0$ 为函数 $f(x)$ 的间断点，若存在 $M > 0$，使得在 $x_0$ 的某个邻域内有 $|f(x)| \leq M$，但 $\lim_{x \to x_0} f(x)$ 不存在，则称 $x_0$ 为有界振荡间断点。

**结论**：==若 $f(x)$ 在 $[a,b]$ 上只有有限个有界振荡间断点，则 $\int_a^b f(x)\,dx$ 存在。==

**证明思路**：
- 有界性保证了函数在整个区间上有界
- 有限个间断点的测度为零，满足黎曼积分存在条件

**2. 无界振荡间断点**

定义：若在间断点 $x_0$ 的任意邻域内，函数 $f(x)$ 都无界，且极限不存在，则称 $x_0$ 为无界振荡间断点。

**结论**：==若 $f(x)$ 在 $[a,b]$ 上存在无界振荡间断点，则 $\int_a^b f(x)\,dx$ 一般不存在（广义积分意义下可能存在）。==

#### 典型例题分析

**例1（有界振荡，积分存在）**

函数：$f(x) = \begin{cases} x^2\sin\frac{1}{x}, & x \neq 0 \\ 0, & x = 0 \end{cases}$

分析：
- 在 $x = 0$ 处为有界振荡间断点
- $|f(x)| \leq |x|^2$，函数在任意有界区间上有界
- 因此 $\int_{-1}^{1} f(x)\,dx$ 存在

**例2（无界振荡，积分不存在）**

函数：$g(x) = \begin{cases} \frac{1}{\sqrt{x}}\sin\frac{1}{x}, & x \in (0,1] \\ 0, & x = 0 \end{cases}$

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20250617182428889.png" alt="image-20250617182428889" style="zoom:50%;" />

分析：
- 在 $x = 0$ 处为无界振荡间断点
- 当 $x \to 0^+$ 时，$|g(x)|$ 无界
- 因此 $\int_0^1 g(x)\,dx$ 不存在

#### 判别方法总结

对于函数 $f(x)$ 在 $[a,b]$ 上有有限个振荡间断点的情况：

1. **检验有界性**：确定每个振荡间断点是否为有界振荡
2. **局部分析**：在每个间断点的邻域内分析函数行为
3. **应用控制收敛定理**：寻找适当的可积控制函数

#### 结论

> **定理**：设函数 $f(x)$ 在 $[a,b]$ 上有有限个振荡间断点，则：
> 
> 1. 若所有振荡间断点均为有界振荡，则 $\int_a^b f(x)\,dx$ 存在
> 2. 若存在无界振荡间断点，则 $\int_a^b f(x)\,dx$ 一般不存在
> 
> **核心要点**：==振荡间断点的有界性是定积分存在的关键因素，而非间断点的个数==

### Q2: 为什么要强调"有限个"间断点？

#### 问题核心
在定积分存在条件中，为什么必须强调"有限个间断点"而不能是"可数无穷个间断点"？

#### 理论原因

**黎曼积分的定义回顾**：
对区间 $[a,b]$ 进行分割：$a = x_0 < x_1 < x_2 < \cdots < x_n = b$

- **上和**：$\overline{S} = \sum_{i=1}^n M_i \Delta x_i$（其中 $M_i$ 是 $f(x)$ 在 $[x_{i-1}, x_i]$ 上的上确界）
- **下和**：$\underline{S} = \sum_{i=1}^n m_i \Delta x_i$（其中 $m_i$ 是 $f(x)$ 在 $[x_{i-1}, x_i]$ 上的下确界）

**积分存在的条件**：$\lim_{\lambda \to 0} (\overline{S} - \underline{S}) = 0$（其中 $\lambda$ 是分割的细度）

**关键观察**：
- **有限个间断点**：可以通过足够细的分割使其影响趋于零
- **无穷个间断点**：可能无法消除其对上和与下和差值的影响

#### 经典反例分析

**反例1：修正的Thomae函数**

定义函数：
$$f(x) = \begin{cases} 
\frac{1}{n}, & x = \frac{1}{n} \text{（n为正整数）} \\
0, & \text{其他有理点和无理点}
\end{cases} \text{在}[0,1]\text{上}$$

**分析**：
- 间断点：$x = \frac{1}{n}$ (n = 1,2,3,...)，共可数无穷个
- 每个间断点都是跳跃间断点（第一类间断点）
- 函数有界：$0 \leq f(x) \leq 1$
- **结论**：尽管有可数无穷个间断点，但 $\int_0^1 f(x)\,dx = 0$ 仍然存在

**为什么这个反例积分存在？**
因为间断点 $\{\frac{1}{n}\}$ 是孤立的，当分割足够细时，包含间断点的小区间对总的上和与下和的差的贡献趋于零。

**反例2：更直观的分析**

我们将重点分析Dirichlet函数（反例3），它更直观地说明了问题。

**反例3：更直观的例子**

考虑函数：
$$h(x) = \begin{cases} 
1, & x \text{为有理数} \\
0, & x \text{为无理数}
\end{cases} \text{在}[0,1]\text{上}$$

**分析**：
- 间断点：所有有理数点（可数无穷个）
- 函数有界：$0 \leq h(x) \leq 1$
- **结论**：$\int_0^1 h(x)\,dx$ 不存在

**为什么不可积？**

用上和与下和来分析：

1. **任意分割中**：每个小区间 $[x_{i-1}, x_i]$ 内都既有有理数又有无理数
2. **上确界与下确界**：
   - $M_i = 1$（因为区间内有有理数，函数值为1）
   - $m_i = 0$（因为区间内有无理数，函数值为0）
3. **上和与下和的差**：
   $$\overline{S} - \underline{S} = \sum_{i=1}^n (M_i - m_i) \Delta x_i = \sum_{i=1}^n 1 \cdot \Delta x_i = b - a = 1$$
4. **关键问题**：无论分割多么细，$\overline{S} - \underline{S} = 1 \neq 0$，不趋于零

#### 直观理解：为什么有限个与无限个不同？

**有限个间断点的情况**：
假设有 $n$ 个间断点 $c_1, c_2, \ldots, c_n$，在每个间断点附近取小区间 $\delta$：

- 包含间断点的区间总长度：$n \cdot \delta$
- 当 $\delta \to 0$ 时，这些区间的总贡献 $\to 0$
- 其余连续部分的上和与下和趋于相等

**无限个间断点的情况**：
如果间断点稠密分布（如有理数）：

- **无法隔离**：无法用有限个小区间覆盖所有间断点
- **每个小区间都受影响**：任意小区间内都含有间断点
- **上和与下和的差无法消除**：如Dirichlet函数始终保持差值为1

#### 总结

**为什么强调"有限个"**：

1. **有限个间断点**：
   - 可以用有限个小区间"包围"所有间断点
   - 这些小区间的总长度可以任意小
   - 剩余的连续部分使得上和与下和趋于相等

2. **无穷个间断点**：
   - 如果是孤立分布（如 $\{1/n\}$）：仍可能积分存在
   - 如果是稠密分布（如有理数）：积分不存在
   - 关键在于能否"控制"间断点的影响

**实用判别方法**：
- **有限个间断点**：积分必存在（函数有界前提下）
- **可数个孤立间断点**：通常积分存在
- **稠密分布的间断点**：积分不存在

**核心思想**：==间断点是否能被"小区间控制"，而非仅仅数量多少==

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20250617203802863.png" alt="image-20250617203802863" style="zoom:50%;" />

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20250617203835164.png" alt="image-20250617203835164" style="zoom:50%;" />

### Q3: 为什么 x ∈ [0, π/2] 时，sin(sin x) < sin x？

#### 问题分析
证明当 $x \in [0, \frac{\pi}{2}]$ 时，不等式 $\sin(\sin x) < \sin x$ 成立。

#### 核心思路

利用正弦函数的基本性质：**对于 $t \in (0, \frac{\pi}{2})$，有 $\sin t < t$**

#### 详细证明

**第一步：建立基础不等式**

> **引理**：对于 $t \in (0, \frac{\pi}{2})$，有 $\sin t < t$

**证明引理**：
设 $f(t) = t - \sin t$，$t \in (0, \frac{\pi}{2})$

- $f'(t) = 1 - \cos t > 0$（因为 $\cos t < 1$ 当 $t \in (0, \frac{\pi}{2})$）
- $f(0) = 0 - \sin 0 = 0$
- 由于 $f'(t) > 0$ 且 $f(0) = 0$，所以 $f(t) > 0$ 当 $t \in (0, \frac{\pi}{2})$
- 因此 $t - \sin t > 0$，即 $\sin t < t$

**第二步：应用到原问题**

对于 $x \in [0, \frac{\pi}{2}]$：

1. **端点情况**：
   - 当 $x = 0$ 时：$\sin(\sin 0) = \sin 0 = 0$，等号成立
   - 当 $x = \frac{\pi}{2}$ 时：$\sin(\sin \frac{\pi}{2}) = \sin 1 < 1 = \sin \frac{\pi}{2}$

2. **内部情况** $x \in (0, \frac{\pi}{2})$：
   - 由于 $x \in (0, \frac{\pi}{2})$，有 $\sin x \in (0, 1)$
   - 注意到 $(0, 1) \subset (0, \frac{\pi}{2})$
   - 应用引理：$\sin(\sin x) < \sin x$（因为 $\sin x \in (0, \frac{\pi}{2})$）

#### 几何直观

**图形解释**：
- 正弦函数 $y = \sin t$ 在 $(0, \frac{\pi}{2})$ 上的图像位于直线 $y = t$ 的下方
- 当我们计算 $\sin(\sin x)$ 时，相当于在正弦曲线上"二次应用"
- 由于第一次应用已经"压缩"了值域，第二次应用进一步压缩

#### 函数性质分析

**单调性分析**：
设 $g(x) = \sin x - \sin(\sin x)$，$x \in [0, \frac{\pi}{2}]$

- $g(0) = 0$
- $g'(x) = \cos x - \cos(\sin x) \cdot \cos x = \cos x(1 - \cos(\sin x))$
- 当 $x \in (0, \frac{\pi}{2})$ 时，$\sin x \in (0, 1)$，所以 $\cos(\sin x) < 1$
- 因此 $g'(x) > 0$，$g(x)$ 在 $(0, \frac{\pi}{2}]$ 上单调递增
- 所以 $g(x) > g(0) = 0$，即 $\sin x > \sin(\sin x)$

#### 推广思考

**一般结论**：
对于任意 $n$ 次复合：$\sin^{(n)}(x) = \sin(\sin(\cdots\sin(x)\cdots))$

当 $x \in (0, \frac{\pi}{2})$ 时，有：
$$x > \sin x > \sin(\sin x) > \sin(\sin(\sin x)) > \cdots$$

这是因为正弦函数在 $(0, 1)$ 上是压缩映射。

#### 总结

> **结论**：当 $x \in [0, \frac{\pi}{2}]$ 时，$\sin(\sin x) \leq \sin x$，且仅在 $x = 0$ 时等号成立。
>
> **关键思想**：利用 $\sin t < t$（$t \in (0, \frac{\pi}{2})$）这一基本不等式，结合函数复合的性质完成证明。
