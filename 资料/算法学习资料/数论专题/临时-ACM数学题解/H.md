###  米奇妙妙程序

直接算概率比较困难，考虑对失败条件进行转化。

找不到 $a_i=0$ 的位置 $i$ ，相当于我们添加了两个位置 $i=0$ 和 $i=n+1$ ，并最后令 $a_0=1$ 或 $a_{n+1}=1$ 了 。进一步观察，会发现 $0$ 和 $n+1$ 这两个位置等价，我们将其合并。那么我们将问题转化到了一个有 $n+1$ 个点的环上，答案即 $P(a_{n+1}=0)$ 。 

如果初始的 $p$ 能选为 $n+1$  的话，那么所有点将等价（因为是在环上，且除了标号外点没有任何区别）。于是有
$$
P'(a_1=0)=P'(a_2=0)=\cdots=P'(a_{n+1}=0)=1-\frac{m}{n+1}
$$
但这是在 $p$ 能取 $n+1$ 的前提下。我们通过一个转化，能求得 $P(a_{n+1}=0)$。具体而言，我们计数 $a_{n+1}=0$

 的方案总数，然后除以总的情况数。$a_{n+1}=0$ 的情况有
$$
(1-\frac{m}{n+1})\times(2n+2)^m
$$
虽然 $2n+2$ 蕴含了初始 $p$ 可选 $n+1$ ，但由于最终 $a_{n+1}=0$ ，所以这个方案总数是排除了初始选 $p=n+1$ 的，那么再除以原本的方案总数，就得到了答案
$$
P(Fail=0)=(1-\frac{m}{n+1})\times \Big(1+\frac{1}{n}\Big)^m
$$
复杂度 $O(T\log m)$。