# Dynamic Programming

# ä¸€ã€æ¦‚è¿°âš 

æœ€ä¼˜åŒ–åŸç†: å­é—®é¢˜çš„å±€éƒ¨æœ€ä¼˜å°†å¯¼è‡´æ•´ä¸ªé—®é¢˜çš„å…¨å±€æœ€ä¼˜, **å³é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„çš„æ€§è´¨**, ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªé—®é¢˜çš„æœ€ä¼˜è§£åªå–å†³äºå…¶å­é—®é¢˜çš„æœ€ä¼˜è§£.

æ— åæ•ˆæ€§åŸåˆ™: å°†å„é˜¶æ®µæŒ‰ç…§ä¸€å®šçš„æ¬¡åºæ’åˆ—å¥½ä¹‹å, å¯¹äºæŸä¸ªç»™å®šé˜¶æ®µçš„çŠ¶æ€, å…¶æœªæ¥çš„å†³ç­–ä¸å—è¯¥é˜¶æ®µä»¥å‰å„æ®µçŠ¶æ€çš„å½±å“è€Œåªèƒ½é€šè¿‡å½“å‰è¿™ä¸ªçŠ¶æ€. æ¢å¥è¯è¯´, æ¯ä¸ªçŠ¶æ€éƒ½æ˜¯è¿‡å»å†å²çš„ä¸€ä¸ªå®Œ æ•´æ€»ç»“. æ­¤å‰çš„å†å²åªèƒ½é€šè¿‡å½“å‰çš„çŠ¶æ€å»å½±å“è¿‡ç¨‹æœªæ¥çš„æ¼”å˜.

> å¦‚æœæŸä¸€é—®é¢˜æœ‰å¾ˆå¤šé‡å å­é—®é¢˜ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’æ˜¯æœ€æœ‰æ•ˆçš„ã€‚
>
> æ‰€ä»¥åŠ¨æ€è§„åˆ’ä¸­æ¯ä¸€ä¸ªçŠ¶æ€ä¸€å®šæ˜¯ç”±ä¸Šä¸€ä¸ªçŠ¶æ€æ¨å¯¼å‡ºæ¥çš„ï¼Œ**è¿™ä¸€ç‚¹å°±åŒºåˆ†äºè´ªå¿ƒ**ï¼Œè´ªå¿ƒæ²¡æœ‰çŠ¶æ€æ¨å¯¼ï¼Œè€Œæ˜¯ä»å±€éƒ¨ç›´æ¥é€‰æœ€ä¼˜çš„ï¼Œ

> [!IMPORTANT]
>
> 1. **ç¡®å®šDPæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰**ï¼ˆè¦å…ˆæ˜ç¡®çŠ¶æ€å˜é‡çš„ä½œç”¨ï¼Œç”¨äºå‚¨å­˜ä»€ä¹ˆï¼‰ã€‚è¯¥ä¸‹æ ‡ä½œç”¨èŒƒå›´ä¹Ÿè¦è€ƒè™‘ï¼Œå¦‚DP[ i ]æ˜¯ä½œç”¨äº0-iè¿˜æ˜¯åªä½œç”¨äºç‚¹ i ã€‚**DPæ•°ç»„å¦‚ä½•åˆå§‹åŒ–**ï¼ˆå“ªäº›æˆ–æ˜¯å…¨éƒ¨DPæ•°ç»„éœ€è¦åˆå§‹åŒ–/åˆå§‹åŒ–ä¸ºä»€ä¹ˆï¼‰
> 2. **ç¡®å®šé€’æ¨å…¬å¼**ï¼ˆææ¸…æ¥šå¦‚ä½•é€’å½’æˆ–é€’æ¨ï¼‰ã€‚**é€’å½’é€‚åˆäºå·²æ˜ç¡®é€’å½’ç»ˆç‚¹çš„**ï¼Œå¦‚æ±‚æ–æ³¢é‚£å¥‘ç¬¬né¡¹ï¼Œæ•°å­—ä¸‰è§’å½¢é¡¶ç‚¹æœ€å¤§å€¼ã€‚é€’å½’å¼•å…¥è®°å¿†åŒ–æœç´¢ï¼Œé€’æ¨å¼•å…¥å¡«è¡¨æ³•ã€‚
> 4. **ç¡®å®šéå†é¡ºåº**ã€‚ï¼ˆåº”è¯¥å°åˆ°å¤§è¿˜æ˜¯å¤§åˆ°å°ï¼Œæ­£æ¨è¿˜æ˜¯é€†æ¨ï¼‰
> 5. **ä¸¾ä¾‹æ¨å¯¼DPæ•°ç»„**



# äºŒã€è®°å¿†åŒ–æœç´¢

**æ•°å­—ä¸‰è§’å½¢**

![image-20240528005926936](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240528005926936.png)

```cpp
int f[N][N];//ç”¨ä¸‹ä¸‰è§’ä¿å­˜ï¼Œf[i][j]è¡¨ç¤ºç‚¹ï¼ˆiï¼Œjï¼‰åˆ°åº•éƒ¨çš„æœ€é•¿è·ç¦»ã€‚åˆå§‹åŒ–ä¸º0ä»è€Œä¾¿äºè®°å¿†åŒ–æœç´¢çš„åˆ¤æ–­
int dfs(int x,int y){
    //è®°å¿†æœç´¢ï¼Œé¿å…è¿›ä¸€æ­¥é€’å½’
    if(f[x][y]!=0)return f[x][y];
    if(x==n-1){          //é€’å½’ç»ˆç‚¹
        f[x][y]=a[x][y];
    }
    else{
        f[x][y]=a[x][y]+max(dfs(x+1ï¼Œy),dfs(x+1,y+1));      //çŠ¶æ€è½¬ç§»æ–¹ç¨‹
    }
    return f[x][y];
}
  
```



# ä¸‰ã€çº¿æ€§DP

æ‰€è°“çº¿æ€§åŠ¨æ€è§„åˆ’,ï¼Œå°±æ˜¯è¯¥é—®é¢˜çš„æ¨¡å‹æ˜¯çº¿æ€§çš„ï¼Œæ•°æ®ç»“æ„è¡¨ç°ä¸ºçº¿æ€§è¡¨çš„å½¢å¼ã€‚

## 1ã€æœ€é•¿ä¸é™å­åºåˆ—

![image-20240528123139225](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240528123139225.png)

### 1.1DPæ³•

**è®¾**`f[i]`è¡¨ç¤ºç¬¬iä¸ªå…ƒç´ ä½œä¸ºæœ€åå…ƒç´ çš„æœ€é•¿ä¸ä¸‹é™å­åºåˆ—çš„é•¿åº¦ , **åˆ™åªéœ€è¦è€ƒè™‘ç¬¬**i**ä¸ªå…ƒç´ æ”¾åœ¨ä¹‹å‰å“ªä¸ªå­åºåˆ—åèƒ½ç»§ç»­æ„æˆä¸ä¸‹é™ åºåˆ—**, **ä»è€Œå°±èƒ½å¾—åˆ°å†³ç­–**.

**ç”±äºéœ€è¦è®°å½•æ–¹æ¡ˆ, éœ€è¦è®°å½•çŠ¶æ€ä¹‹é—´çš„è½¬ç§». å¯ä»¥ç”¨pre[i] = jè¡¨ç¤ºå½“å‰å­åºåˆ—ä¸­a[i]å‰çš„å…ƒç´ ä¸ºa[j].**

`f[i]=max(f[i],f[j]+1);`

```cpp
int a[101],f[101];
for(int i=2;i<n;++i){
    for(int j=0;j<i;++j){
        if(a[j]<=a[i]){
            f[i]=max(f[i],f[j]+1);
        }
    }
    ans=max(ans,f[i]);
}
```



### 1.2äºŒåˆ†æŸ¥æ‰¾æ³•ğŸŒ™

![image-20240528152800158](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240528152800158.png)

```cpp
len=1;b[1]=a[1];
for(int i=2;i<=n;++i){
    if(a[i]>b[len]){
        b[++len]=a[i]
    }
    else{
        j=find(a[i]);
        b[j]=a[i];
    }
}
printf("%d\n",len);
```

```cpp
int find(int x){
    int L=1,R=len,mid;
    while(L<=R){
        mid=(L+R)/2;
        if(x>b[mid])L=mid+1;
        else R=mid-1;
    }
    return L;
}
```

## 2ã€æœ€é•¿å…¬å…±å­åºåˆ—

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529133150604.png" alt="image-20240529133150604" style="zoom:67%;" />

> 1ã€DPæ•°ç»„ï¼ŒDP[i] [j]è¡¨ç¤ºä¸²1çš„å‰ i ä¸ªå…ƒç´ ä¸ä¸²2çš„å‰ j ä¸ªå…ƒç´ çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸ªæ•°ã€‚
>
> 2ã€å…³äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚å¦‚æœ`a[i]=a[j]`ï¼ŒF[i] [j]=F[i-1] [j-1]+1ã€‚å¦‚æœ`a[i]!=a[j]`ï¼ŒF[i] [j]=max(F[i] [j-1],F[i-1] [j])ã€‚ä¸”å› ä¸ºæ²¡æœ‰ç¡®å®šçš„ç»ˆç‚¹ï¼Œæ‰€ä»¥é€‰æ‹©é€’æ¨è€Œä¸æ˜¯é€’å½’ã€‚
>
> 3ã€å¦‚ä½•åˆå§‹åŒ–ã€‚i=0æˆ–è€…j=0å¤„å…¨éƒ½åˆå§‹åŒ–ä¸º0ã€‚
>
> 4ã€é€’æ¨é¡ºåºé—®é¢˜ã€‚å› ä¸ºæ˜¯é€’æ¨ï¼Œæ‰€ä»¥æ˜¯å¡«è¡¨æ³•çš„æ–¹å¼è¿›è¡Œæ“ä½œã€‚ä¸€è¡Œä¸€è¡Œåœ°å¡«å†™ã€‚åŒå±‚forå¾ªç¯ã€‚
>
> ã€ä¸²1ä¸€æ¬¡åŠ å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œæ­¤æ—¶i-1çŠ¶æ€çš„DPæ•°ç»„å·²ç»æ˜¯å¤„ç†å¥½äº†çš„ï¼Œjä¹‹å‰çš„DPæ•°ç»„ä¹Ÿæ˜¯å¤„ç†å¥½äº†çš„ã€‘<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529134502684.png" alt="image-20240529134502684" style="zoom: 67%;" />
>
> ![image-20240529163331192](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529163331192.png)

```cpp
/*å¦‚æœéœ€è¦è¾“å‡ºå…¬å…±å­åºåˆ—å°±è¦ç”¨pre*/
for(int i=1;i<=m;++i){
    for(int j=1;j<=m;++j){
        if(a[i]==b[j]){
            f[i][j]=f[i-1][j-1]+1;
            pre[i][j]=1;         //å·¦ä¸Šæ–¹ç®­å¤´â†–
        }
        else if(f[i-1][j]<f[i][j-1]){
            f[i][j]=f[i][j-1];
            pre[i][j]=2;        //å·¦è¾¹ç®­å¤´ â†
        }
        else{
            f[i][j]=f[i-1][j];
            pre[i][j]=3;        //ä¸Šè¾¹ç®­å¤´â†‘            
        }
    }
}
```



## 3ã€æœ€é•¿å…¬å…±å­ä¸²

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529142835736.png" alt="image-20240529142835736" style="zoom:67%;" />

è¦æ³¨æ„å­—ç¬¦æ•°ç»„å’ŒDPæ•°ç»„çš„ä¸‹æ ‡å¯¹åº”å…³ç³»

```cpp
for(int i=1;i<strlen(a);++i){
    for(int j=1;j<strlen(b);++j){
        if(a[i-1]==b[j-1]){
            f[i][j]=f[i-1][j-1]+1;
        }
        else{
            f[i][j]=0;
        }
        max=f[i][j]>max?f[i][j]:max;
    }
}
```

## 4ã€ç¼–è¾‘è·ç¦»

> ç¼–è¾‘è·ç¦»ï¼ˆEdit distance,ç®€ç§°EDSï¼‰ï¼Œå°±æ˜¯æ±‚å­—ç¬¦ä¸²s1åˆ°å­—ç¬¦ä¸²s2çš„æœ€å°‘ä¿®æ”¹æ¬¡æ•°ã€‚æ¯æ¬¡ä¿®æ”¹çš„æ–¹å¼å¦‚ä¸‹ï¼š
> `1.å¢åŠ ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚ï¼ša b c  -> a b c d 
> 2.åˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚ï¼ša b c  -> a b 
> 3.ä¿®æ”¹ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚ï¼ša b c  -> a b d `

> 1ã€ç¡®å®šDPæ•°ç»„ã€‚DP[i] [j]è¡¨ç¤ºa[1â€¦â€¦i]åˆ°b[1â€¦â€¦j]çš„ç¼–è¾‘è·ç¦»ã€‚
>
> 2ã€ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚å¦‚æœa[i]=a[j]é‚£ä¹ˆ$f[i][j]=f[i-1][j-1]$â€‹
>
> <img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529162523997.png" alt="image-20240529162523997" style="zoom: 50%;" />
>
> â€‹	å¦‚æœa[i]!=a[j]é‚£ä¹ˆ$f[i][j]=min(f[i-1][j-1],f[i-1][j],f[i][j-1])+1$,å³å°†è¿›è¡Œå¢åˆ æ”¹ä»»ä¸€èŠ±é”€æœ€å°çš„æ“ä½œåŠ 1.
>
> 3ã€åˆå§‹åŒ–DPæ•°ç»„ã€‚æ˜¾ç„¶DP[0] [j]=jï¼ŒDP[i] [0]=iã€‚

![image-20240529162251359](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529162251359.png)

```cpp
//åˆå§‹åŒ–DPæ•°ç»„
for(int i=1;i<=strlen(a);++i){f[i][0]=i;}
for(int j=1;j<=strlen(b);++j){f[0][j]=j;}
//è¿›è¡ŒDPæ“ä½œ
for(int i=1;i<=strlen(a);++i){
    for(int j=1;j<=strlen(b);++j){
        if(a[i]==a[j]){
            f[i][j]=f[i-1][j-1];
        }
        else{
            f[i][j]=min(f[i-1][j-1],f[i-1][j],f[i][j-1])+1;
        }
    }
}
cout<<f[strlen(a)][strlen(b)];
```

# å››ã€èƒŒåŒ…DP

## 1ã€01èƒŒåŒ…

> **ç¡®å®šçŠ¶æ€å˜é‡â†’ç¡®å®šé€’æ¨å…³ç³»â†’ç¡®å®šè¾¹ç•Œæ¡ä»¶  â†’ç¡®å®šé€’æ¨é¡ºåºï¼ˆå°åˆ°å¤§è¿˜æ˜¯å¤§åˆ°å°ï¼Œæ­£æ¨è¿˜æ˜¯é€†æ¨ï¼‰**

å¯ä»¥ç”¨ä¸€ç»´æ•°ç»„ç®€åŒ–DPæ•°ç»„é™ä½ç©ºé—´å¤æ‚åº¦

> 1ã€ç¡®å®šDPæ•°ç»„ã€‚DP[i] [j]è¡¨ç¤ºå‰`i`ä»¶ç‰©å“æ”¾å…¥å®¹é‡å¤§å°ä¸º`j`çš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚iï¼Œj=0æ—¶ï¼Œf[i] [0]=0ï¼Œf[0] [j]=0
>
> 2ã€ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚
>
> å¦‚æœå½“å‰ç‰©å“çš„`weght[i]`å¤§äºèƒŒåŒ…å®¹é‡j,åˆ™ä¸æ”¾å…¥ã€‚`f[i][j]=f[i-1][j]`
>
> å¦‚æœå‰ç‰©å“çš„`weght[i]`å°äºç­‰äºèƒŒåŒ…å®¹é‡jï¼Œåˆ™`f[i][j]=max(f[i-1][j] , f[i-1][j-weight[i]]+val[i])`
>
> <img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529193035225.png" alt="image-20240529193035225" style="zoom: 80%;" />
>
> <img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529192343590.png" alt="image-20240529192343590" style="zoom:67%;" />

```cpp
for(int i=1;i<=n;++i){
    for(int j=1;j<=m;++j){
        if(weight[i]>m){
            f[i][j]=f[i-1][j];
        }
        else{
            f[i][j]=max(f[i-1][j],val[i]+f[i][j-weight[i]]+val[i]);
        }
    }
}
cout<<f[n][m];
```

> è€ƒè™‘è¿›è¡Œä¼˜åŒ–ï¼Œç©ºé—´å¤æ‚åº¦ä»Oï¼ˆmnï¼‰ä¼˜åŒ–ä¸ºOï¼ˆmï¼‰ï¼Œå»ºç«‹ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚è€ƒè™‘åˆ°DPæ•°ç»„çš„æ›´æ–°éƒ½æ˜¯ç”±ä¸Šä¸€è¡Œçš„æ•°å€¼æ›´æ–°å¾—åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¯¹æ¯è¡Œ**é€†å‘æ›´æ–°**ã€‚
>
> æ­£å‘æ›´æ–°åˆ™ä¼šæœ‰ä¹‹å‰çš„æ•°æ®é€ æˆé”™è¯¯ã€‚
>
> ![image-20240529193923521](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529193923521.png)

```cpp
int f[m];   //å®šä¹‰ä¸€ä¸ªå…¨å±€æ•°ç»„
for(int i=1;i<=n;++i){
    for(int j=m;j>=weight[i];--j){
        f[j]=max(f[j],f[j-weight[i]]+val[i]);
    }
}
cout<<f[m];
```

## 2ã€å®Œå…¨èƒŒåŒ…

> 1ã€ç¡®å®šDPæ•°ç»„ã€‚DP[i] [j]è¡¨ç¤ºå‰`i`ä»¶ç‰©å“æ”¾å…¥å®¹é‡å¤§å°ä¸º`j`çš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚iï¼Œj=0æ—¶ï¼Œf[i] [0]=0ï¼Œf[0] [j]=0
>
> 2ã€ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚å¦‚æœå½“å‰ç‰©å“çš„`weght[i]`å¤§äºèƒŒåŒ…å®¹é‡j,åˆ™ä¸æ”¾å…¥ã€‚`f[i][j]=f[i-1][j]`
>
> å¦‚æœå‰ç‰©å“çš„`weght[i]`å°äºç­‰äºèƒŒåŒ…å®¹é‡jï¼Œ`f[i][j]=max(f[i][j-weight]+val[i],f[i-1][j])`
>
> <img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529194524703.png" alt="image-20240529194524703" style="zoom:80%;" />

```cpp
for(int i=1;i<=n;++i){
    for(int j=1;j<=m;++j){
        if(weight[i]>m){
            f[i][j]=f[i-1][j];
        }
        else{
            f[i][j]=max(f[i][j-weight]+val[i],f[i-1][j]);
        }
    }
}
cout<<f[n][m];
```

> åŒæ ·è€ƒè™‘ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ï¼Œç”¨ä¸€ä¸ªé•¿åº¦ä¸ºmçš„æ•°ç»„å‚¨å­˜DPç»“æœã€‚
>
> ![image-20240529194830582](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529194830582.png)

```cpp
for(int i=1;i<=n;++i){
    for(int j=weight[i];j<=m;++j){
        f[j]=max(f[j-weight]+val[i],f[j]);
    }
}
cout<<f[m];
```

## 3ã€å¤šé‡èƒŒåŒ…

### 3.1æœ´ç´ ç®—æ³•ï¼ˆçœ‹ä¸º01èƒŒåŒ…ï¼‰

![image-20240529201634829](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240529201634829.png)

æ—¶é—´å¤æ‚åº¦ï¼š$O(mâˆ‘s_i)$

```cpp
for(int i=1;i<=n;++i){
    for(int j=m;j>=weight[i];--j){
        for(int k=0;k<=s[i]&&k*v[i]<=j;k++){
            f[j]=max(f[j],f[j-k*weight[i]]+k*val[i]);
        }
    }
}
```

### 3.2äºŒè¿›åˆ¶ä¼˜åŒ–ç®—æ³•

> ç®—æ³•æ€æƒ³ï¼šå°†ç¬¬iä¸­ç‰©å“æ‹†åˆ†ä¸ºè‹¥å¹²ä»¶ç‰©å“ï¼Œæ¯ä»¶ç‰©å“çš„ä½“ç§¯å’Œä»·å€¼ä¹˜ä»¥ä¸€ä¸ªæ‹†åˆ†ç³»æ•°ï¼ˆ$2^0,2^1,2^2,2^3.....,s_i-2^k+1$ï¼‰,ä»è€Œè½¬åŒ–ä¸º01èƒŒåŒ…çš„ç‰©å“æ±‚è§£ã€‚ã€å› ä¸º$0<x<=s_i$çš„ä»»æ„xéƒ½å¯ä»¥ç”¨å…¶äºŒè¿›åˆ¶ç³»æ•°ç»„åˆæ„æˆï¼Œå¦‚12æ‹†åˆ†ä¸º1,2,4,5ã€‘æ—¶é—´å¤æ‚åº¦$O(mâˆ‘logs_i)$â€‹ã€‚
>
> ç”¨vvå’Œwwæ•°ç»„åˆ†åˆ«å­˜å‚¨äºŒè¿›åˆ¶ä¼˜åŒ–åçš„æ–°ä½“ç§¯å’Œæ–°ä»·å€¼ã€‚
>
> ![image-20240531211446785](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240531211446785.png)

```cpp
//äºŒè¿›åˆ¶å¤„ç†
int num=1;
for(int i=1;i<=n;++i){
    cin>>v>>w>>s;        //ä½“ç§¯ï¼Œå•ä¸ªä»·å€¼ï¼Œæ•°é‡
    for(int j=1;j<=s;j<<=1){  //åˆ¤æ–­çš„ä¸Šé™å…¶å®ä¹Ÿæ˜¯ä¸€ç›´åœ¨æ”¹å˜çš„
        vv[num]=j*v;
        ww[num++]=j*w;
        s-=j;
    }
    if(s){
        vv[num]=s*v;
        ww[num++]=s*w;
    }
}

//01èƒŒåŒ…
for(int i=1;i<num;i++){
    for(int j=m;j>=vv[i];--j){
        f[i]=max(f[i],ww[i]+f[i-vv[i]])
    }
}
cout<<f[m];
```



### 3.3å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–



# 5ã€æ ‘å½¢DP

# å…­ã€çŠ¶æ€å‹ç¼©DP

**æ ¸å¿ƒæ€æƒ³ï¼šç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçŠ¶æ€ï¼Œç”¨åè¿›åˆ¶å­˜å‚¨çŠ¶æ€**

ä¼˜å…ˆçº§ï¼šæˆå‘˜è®¿é—®ï¼å•ç›®è¿ç®—ç¬¦ï¼ä¹˜é™¤åŠ å‡ï¼ç§»ä½ï¼ä¸ï¼å¼‚æˆ–ï¼æˆ–ï¼é€»è¾‘ä¸ã€æˆ–

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240604135346652.png" alt="image-20240604135346652" style="zoom:67%;" />

## ä¾‹é¢˜1ï¼šå°å›½ç‹

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240604150214628.png" alt="image-20240604150214628" style="zoom:67%;" />

> è§£é¢˜æ€è·¯ï¼šè¦ä¿è¯**è¡Œå†…åˆæ³•ä¸è¡Œé—´å…¼å®¹**
>
> é€šè¿‡é¢„å¤„ç†å…ˆæ£€ç´¢å‡º**è¡Œå†…åˆæ³•**çš„çŠ¶æ€åŠå…¶å¯¹åº”å›½ç‹ï¼ˆä½1ï¼‰ä¸ªæ•°ã€‚sæ•°ç»„ç”¨äºè®°å½•çŠ¶æ€ï¼Œnumæ•°ç»„è®°å½•å¯¹åº”å›½ç‹æ•°ã€‚
>
> ![image-20240604150049437](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240604150049437.png)
>
> DPæ•°ç»„f[ i , j , a ]è¡¨ç¤ºå‰ i è¡Œå·²æ”¾äº† j ä¸ªå›½ç‹ï¼Œç¬¬ i è¡Œçš„ç¬¬aä¸ªçŠ¶æ€çš„æ–¹æ¡ˆæ•°ã€‚
>
> çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$f[i,j,a]=âˆ‘f[i-1,j-c[a],b]$â€‹â€‹ã€‚

![image-20240604155845647](C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240604155845647.png)

```cpp
int n,k; //æ£‹ç›˜è¡Œæ•°ï¼Œå›½ç‹æ€»æ•°
int cnt;
int s[1<<12];     //æœ€å¤§12X12æ£‹ç›˜
int num[1<<12];
long long f[12][144][1<<12];
cin>>n>>k;

//é¢„å¤„ç†
for(int i=0;i<1<<n;++i){
    if(!(i&i>>1)){
        s[cnt++]=i;
        for(int j=0;j<n;++j){
            if(i>>j&1){
                num[i]++:
            }
        }
    }
}

//çŠ¶æ€è®¡ç®—
f[0][0][0]=1;
for(int i=1;i<=n+1;++i){          //æšä¸¾è¡Œ
    for(int j=0;j<=k;++j){            //æšä¸¾å›½ç‹æ•°
        for(int a=0;a<cnt;a++){           //æšä¸¾iè¡Œ
            for(int b=0;b<cnt;b++){               //æšä¸¾i-1è¡Œ
				int c=num[s[a]];
                if((j>=c)&&!(s[b]&s[a])&&!(s[b]&(s[a]<<1))&&!(s[b]&(s[a]>>1))){
                    f[i][j][a]+=f[i-1][j-c][b];
                }
            }
        }
    }
}
cout<<f[n+1][k][0]<<ednl;


```

## ä¾‹é¢˜2ï¼šç‰ç±³ç”°

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240604161010246.png" alt="image-20240604161010246" style="zoom: 67%;" />

> è§£é¢˜æ€è·¯ï¼šè¿˜æ˜¯æƒ³åŠæ³•è§£å†³ä¿è¯**è¡Œå†…åˆæ³•ä¸è¡Œé—´å…¼å®¹**ã€‚
>
> è¡Œå†…åˆæ³•ï¼šé¢„å¤„ç†ï¼Œæ‰¾å‡ºçŠ¶æ€æ•°
>
> è¡Œé—´å…¼å®¹ï¼š
>
> DPæ•°ç»„f[ i ] [ a ]è¡¨ç¤ºå·²ç»ç§æ¤å‰iè¡Œï¼Œç¬¬iè¡Œç¬¬aç§çŠ¶æ€çš„æ–¹æ¡ˆæ•°
>
> $f[i][a]=âˆ‘f[i][b]$,  $ans=âˆ‘f[n][b]$â€‹â€‹ã€‚

<img src="C:/Users/HUAWEI/AppData/Roaming/Typora/typora-user-images/image-20240604164126369.png" alt="image-20240604164126369" style="zoom:50%;" />

```cpp
int s[1<<12];         //çŠ¶æ€æ•°ç»„
int f[14][1<<12];     //DPæ•°ç»„,ä»1å¼€å§‹å­˜å›¾ï¼Œn+1è¡Œå­˜çš„ç­”æ¡ˆï¼Œæ‰€ä»¥12+1+1
int g[14];            //çŠ¶æ€å‹ç¼©å­˜å›¾,ä»1å¼€å§‹å­˜å›¾
#define MOD 100000000
int main(){
    int n,m;
    int cnt=0;
    cin>>n>>m;
    //é¢„å¤„ç†
    for(int i=1;i<=n;++i){
        for(int j=1;j<=m;++j){
            int x;
            cin>>x;
            g[i]=(g[i]<<1)+x;       //å‹ç¼©å­˜å›¾
        }
    }
    for(int i=1;i<1<<n;++i){
        if(!(i&i>>1)){s[cnt++]=i;}     //å¯»æ‰¾å¯è¡ŒçŠ¶æ€
    }
    
    //op
    f[0][0]=1;
    for(int i=1;i<=n;++i){
        for(int j=0;j<cnt;++j){
            for(int k=0;k<cnt;++k){
                if((s[a]&g[i])==s[a]&&!(s[a]&s[b])){ 
  //å…³æ³¨ä¸€ä¸‹ifè¯­å¥åˆ¤æ–­çš„æ¡ä»¶s[a]&s[b]çš„ä¸¥è‹›æ€§,è¿˜å¯ä»¥å°†æ¡ä»¶é™åˆ¶æ›´æ·±ä¸€ç‚¹åŠ ä¸Š(s[b]&g[i-1])==s[b]æˆ–è€…è¿”å‘è€ƒè™‘è¿‡æ»¤æ‰éæ³•çš„æ¡ä»¶if(s[a]&~g[i]||s[b]&~g[i-1]||s[a]&s[b])continue;
                    f[i][a]=(f[i][a]+f[i-1][b])%MOD;
                }
            }
        }
    }
    cout<<f[n][0];
    
}

```





# 7ã€æ•°ä½DP